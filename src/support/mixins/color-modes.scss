@mixin color-mode-theme($base-mode, $theme-name, $include-root: false) {
  @if $include-root {
    :root {
      @content;
    }
  }

  [data-color-mode="#{$theme-name}"],
  [data-color-mode="#{$base-mode}"][data-#{$base-mode}-theme="#{$theme-name}"] {
    @content;
  }

  [data-color-mode="auto"][data-#{$base-mode}-theme="#{$theme-name}"] {
    @media (prefers-color-scheme: #{$base-mode}) {
      @content;
    }
  }
}

// Allows CSS to be scoped to a specific color mode
@mixin color-mode($mode) {
  @if $mode == light {
    :root,
    [data-color-mode="light"]:not([data-light-theme]),
    [data-color-mode="light"][data-light-theme="light"] {
      @content;
    }

    [data-color-mode="auto"]:not([data-light-theme]),
    [data-color-mode="auto"][data-light-theme="light"] {
      @media (prefers-color-scheme: light) {
        @content;
      }
    }
  }
  @else if $mode == dark {
    [data-color-mode="dark"]:not([data-dark-theme]),
    [data-color-mode="dark"][data-dark-theme="dark"] {
      @content;
    }

    [data-color-mode="auto"]:not([data-dark-theme]),
    [data-color-mode="auto"][data-dark-theme="dark"] {
      @media (prefers-color-scheme: dark) {
        @content;
      }
    }
  }
  @else if $mode == dimmed {
    [data-color-mode="dimmed"],
    [data-color-mode="dark"][data-dark-theme="dimmed"] {
      @content;
    }

    [data-color-mode="auto"][data-dark-theme="dimmed"] {
      @media (prefers-color-scheme: dark) {
        @content;
      }
    }
  }
}

@mixin color-mode-var($name, $light, $dark) {
  @include color-mode(light) {
    --color-#{$name}: #{$light};
  }

  @include color-mode(dark) {
    --color-#{$name}: #{$dark};
  }
}
